<div class="flex flex-col h-full bg-white ">
    <div class="px-6 py-5 border-b border-slate-100 flex justify-between items-center bg-slate-50">
        <div>
            <h2 class="text-xl font-bold text-slate-800">
                {{ employee ? 'Editar Empleado' : 'Nuevo Empleado' }}
            </h2>
            <p class="text-sm text-slate-500">Datos personales y contrato</p>
        </div>
        <button (click)="onCancel.emit()" class="text-slate-400 hover:text-red-500 transition">
            <i class="fas fa-times text-xl"></i>
        </button>
    </div>

    <div class="flex-1 overflow-y-auto p-6">
        <form [formGroup]="form" class="space-y-6">
            
            <div class="space-y-4">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 pb-2">Personales</h3>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Nombre</label>
                        <input formControlName="first_name" type="text" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Apellido</label>
                        <input formControlName="last_name" type="text" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Cédula / ID</label>
                    <input formControlName="identification" type="text" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg font-mono">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Fecha Nacimiento</label>
                        <input formControlName="birth_date" type="date" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Teléfono</label>
                        <input formControlName="phone" type="tel" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Email</label>
                    <input formControlName="email" type="email" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Dirección</label>
                    <textarea formControlName="address" rows="2" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg"></textarea>
                </div>
            </div>

            <div class="space-y-4 pt-4">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 pb-2">Contrato</h3>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Departamento</label>
                        <input formControlName="department" type="text" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Cargo</label>
                        <input formControlName="position" type="text" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg">
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Salario Base (USD)</label>
                        <input formControlName="salary" type="number" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg font-bold">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Fecha Ingreso</label>
                        <input formControlName="hired_at" type="date" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg">
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Tipo Contrato</label>
                        <select formControlName="contract_type" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            <option value="UNDEFINED">Indefinido</option>
                            <option value="FIXED">Tiempo Determinado</option>
                            <option value="INTERN">Pasante</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Esquema Bonos</label>
                        <select formControlName="bonus_scheme" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            <option value="Standard">Estándar (Base)</option>
                            <option value="Performance">Rendimiento</option>
                            <option value="Sales_Commission">Comisión Ventas</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Horario / Turno</label>
                        <select formControlName="schedule_id" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500">
                            <option [ngValue]="null">Sin Horario Asignado</option>
                            @for (sch of schedules(); track sch.id) {
                                <option [value]="sch.id">{{ sch.name }}</option>
                            }
                        </select>
                    </div>
                </div>

                <div class="flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-100">
                    <span class="font-bold text-slate-700">Estado Activo</span>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" formControlName="is_active" class="sr-only peer">
                        <div class="w-11 h-6 bg-slate-200 rounded-full peer peer-checked:bg-emerald-500 peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
                    </label>
                </div>
            </div>

            <div class="space-y-4 pt-4" formGroupName="emergency_contact">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 pb-2">Contacto Emergencia</h3>
                
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Nombre Contacto</label>
                    <input formControlName="name" type="text" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Relación</label>
                        <input formControlName="relationship" type="text" placeholder="Madre, Esposo..." class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Teléfono</label>
                        <input formControlName="phone" type="tel" class="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg">
                    </div>
                </div>
            </div>

        </form>
    </div>

    <div class="p-6 border-t border-slate-100 bg-slate-50 flex gap-3">
        <button (click)="onCancel.emit()" class="flex-1 px-4 py-3 border border-slate-300 text-slate-700 rounded-xl font-bold hover:bg-slate-100 transition">Cancelar</button>
        <button (click)="onSubmit()" [disabled]="isSubmitting()" class="flex-1 px-4 py-3 bg-slate-900 text-white rounded-xl font-bold hover:bg-slate-800 disabled:opacity-50">
            {{ isSubmitting() ? 'Guardando...' : 'Guardar Ficha' }}
        </button>
    </div>
</div>